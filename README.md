# Sever
Создано 03.02.2025
## Навигация
- [Краткое описание](#краткое-описание)
- [Техническая реализация](#техническая-реализация)
- [Структура базы данных](#структура-базы-данных)
- [Описание разработанных методов](#описание-разработанных-методов)

## Краткое описание
<p> Данное программное обеспечение представляет собой серверную часть веб-приложения по электронному документообороту для ПО "Север".</p>

## Техническая реализация
<ul>
    <li> <b>Язык программирования</b>: Python 3.8.10;
    <li> <b>Веб-фреймворк</b>: Flask;
    <li> <b>Веб-сервер: Nginx</b> 1.18.0;
    <li> <b>Операционная система</b>: Ubuntu-server 20.04;
    <li> <b>СУБД</b>: PostgreSQL 12.22;
    <li> <b>Файловый сервер</b>: MinIO v2024-12-18;
    <li> <b>Графический интерфейс БД</b>: PgAdmin4;
</ul>

## Структура базы данных
<p> База данных состоит из множества связанных друг с другом таблиц и приведена к третьей нормальной форме. 
</p>

### Константные данные
<p> К константным данным относятся данные, которые не подразумевают регулярных изменений в рамках работы приложения. Изменение константных данных разрешено только администратору приложения напрямую через базу данных, чтобы не нарушить работу приложения.
</p>

#### Статусы закупки
<p> Статус закупки - это обозначение этапа, который проходит определенная позиция из содержания служебной записки.
</p>

<details>
<summary><b>Существующие статусы закупки:</b></summary>
<table>
    <tr>
        <th>ID</th>
        <th>Название</th>
        <th>Коэффициент</th>
    </tr>
    <tr>
        <td>1</td>
        <td>Запрос ТКП </td>
        <td>0.1</td>
    </tr>
    <tr>
        <td>2</td>
        <td>Заявка на проведения закупки</td>
        <td>0.15</td>
    </tr>
    <tr>
        <td>3</td>
        <td>Согласование</td>
        <td>0.2</td>
    </tr>
    <tr>
        <td>4</td>
        <td>Размещение закупки </td>
        <td>0.4</td>
    </tr>
    <tr>
        <td>5</td>
        <td>Подведение итогов</td>
        <td>0.7</td>
    </tr>
    <tr>
        <td>6</td>
        <td>Договор заключен</td>
        <td>0.9</td>
    </tr>
    <tr>
        <td>7</td>
        <td>На складе</td>
        <td>1</td>
    </tr>
</table>
</details>

#### Статусы выполнения служебной записки
<p> Статусы выполнения служебной показывают прогресс реализации поданной служебной записки.
</p>

<details>
<summary><b>Существующие статусы исполнения:</b></summary>
<table>
    <tr>
        <th>ID</th>
        <th>Название</th>
    </tr>
    <tr>
        <td>1</td>
        <td>Ожидания согласования</td>
    </tr>
    <tr>
        <td>2</td>
        <td>Зарегистрирована</td>
    </tr>
    <tr>
        <td>3</td>
        <td>Отклонена руководителем отдела</td>
    </tr>
    <tr>
        <td>4</td>
        <td>Исполнение</td>
    </tr>
    <tr>
        <td>5</td>
        <td>Выполнена</td>
    </tr>
    <tr>
        <td>6</td>
        <td>Отклонена отделом МТО</td>
    </tr>
</table>
</details>

#### Роли пользователей
<p> Роли пользователей необходимы для разделения функциональности приложения.
</p>

<details>
<summary><b>Существующие роли:</b></summary>
<table>
    <tr>
        <th>ID</th>
        <th>Название</th>
        <th>Комментарий</th>
    </tr>
    <tr>
        <td>1</td>
        <td>Руководитель отдела</td>
        <td>Просмотр: реестр отдела (согласованные, отклоненные) Создание служебных записок. Одобрение служебных записок сотрудников.</td>
    </tr>
    <tr>
        <td>2</td>
        <td>Начальник отдела закупок</td>
        <td>Просмотр: полный реестр (согласованные, отклоненные). Назначение ответственных исполнителей.</td>
    </tr>
    <tr>
        <td>3</td>
        <td>Руководство компании</td>
        <td>Просмотр: полный реестр (согласованные, отклоненные).</td>
    </tr>
    <tr>
        <td>4</td>
        <td>Сотрудник</td>
        <td>Просмотр: свой реестр (согласованные, отклоненные). Создание служебной записки</td>
    </tr>
    <tr>
        <td>5</td>
        <td>Сотрудник отдела закупок</td>
        <td>Просмотр: собственного реестра (где назначен). Внесение изменений в содержание служебной записки</td>
    </tr>
</table>
</details>

<p> Важно отметить иерархичную структуру ролей, которая не позволяет всем пользователям получить доступ ко всем служебным запискам.
</p>
<p> Схематично это разделение функциональности по отношению к служебным запискам будет выглядеть следующим образом:
</p>

![Роли и статусы](images/Roles.png)

<p> Как можно заметить на изобрежении желтым отмечены статусы у служебных записок, при которых они видны только сотруднику создавшему эту служебную записку и его руководителю. Зеленым отмечены статусы исполнения служебных записок, при которых они видны уже всем остальным ролям.
</p>


## Описание разработанных методов
<p> Разработанные методы можно разделить на несколько категорий:
</p>
<ul>
    <li> Методы обработки служебных записок;
    <li> Методы для работы с пользовательскими данными;
    <li> Методы для получения селекторов;
    <li> Методы для поиска по реестру;
</ul>